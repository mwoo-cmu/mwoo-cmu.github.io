<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Options and Results - Rustboro Trainer School (Rust Notes)</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title.html">The Rustboro Trainer School</a></li><li class="chapter-item expanded affix "><a href="dedication.html">Dedication & Acknowledgements</a></li><li class="chapter-item expanded affix "><li class="part-title">A Very Long Introduction to Rust</li><li class="chapter-item expanded "><a href="variables.html"><strong aria-hidden="true">1.</strong> Variables</a></li><li class="chapter-item expanded "><a href="control_flow.html"><strong aria-hidden="true">2.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="functions.html"><strong aria-hidden="true">3.</strong> Functions</a></li><li class="chapter-item expanded "><a href="enums.html"><strong aria-hidden="true">4.</strong> Enumerations</a></li><li class="chapter-item expanded "><a href="option.html" class="active"><strong aria-hidden="true">5.</strong> Options and Results</a></li><li class="chapter-item expanded "><a href="blocks.html"><strong aria-hidden="true">6.</strong> Blocks and Scope</a></li><li class="chapter-item expanded "><a href="structs.html"><strong aria-hidden="true">7.</strong> Structs and Tuples</a></li><li class="chapter-item expanded "><a href="traits.html"><strong aria-hidden="true">8.</strong> Traits and Polymorphism</a></li><li class="chapter-item expanded "><a href="macros.html"><strong aria-hidden="true">9.</strong> Using Macros!</a></li><li class="chapter-item expanded "><a href="macrodef.html"><strong aria-hidden="true">10.</strong> Creating Macros!</a></li><li class="chapter-item expanded "><a href="visibility.html"><strong aria-hidden="true">11.</strong> Visibility</a></li><li class="chapter-item expanded "><a href="borrowing.html"><strong aria-hidden="true">12.</strong> Borrowing</a></li><li class="chapter-item expanded "><a href="lifetimes.html"><strong aria-hidden="true">13.</strong> Lifetimes</a></li><li class="chapter-item expanded "><a href="common_issues.html"><strong aria-hidden="true">14.</strong> Common Issues</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rustboro Trainer School (Rust Notes)</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="options-and-results"><a class="header" href="#options-and-results">Options and Results</a></h1>
<p>Rust doesn't have traditional <code>null</code> pointers and error handling (aside from the <code>panic!</code> macro), and relies on two built-in enumerations to manage these.</p>
<h2 id="null-using-option"><a class="header" href="#null-using-option">null Using Option<T></a></h2>
<p><code>Option&lt;T&gt;</code> is a generic enumeration defined as follows:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// T is a generic argument passed into the type (similar to its use in  Java or C++)
enum Option&lt;T&gt; {
  None, // null equivalent
  Some(T), // non-null equivalent
}
<span class="boring">}</span></code></pre></pre>
<p>When you initialise an <code>Option</code> value, you need to tell the compiler what type <code>T</code> represents. For example, if you want a variable that could be either a <code>String</code> or <code>None</code>, you would create a variable like this:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// because `Option` is a built-in enum, you don't need to qualify the attributes 
// like Option::Some or Option::None.
let maybe_string: Option&lt;String&gt; = Some(String::from("Is a string"));

// check whether maybe_string is a string or not
if let Some(s) = maybe_string {
  println!("It's a string: {}", s);
} else {
  // {:?} means to print debug info, for things with the `#[derive(Debug)]`
  // attribute. Option has the #[derive(Debug)] attribute, among many others
  println!("It's not a string: {:?}", maybe_string);
}
<span class="boring">}</span></code></pre></pre>
<h3 id="documentation"><a class="header" href="#documentation">Documentation</a></h3>
<p><a href="https://doc.rust-lang.org/std/option/enum.Option.html">Option</a></p>
<h2 id="errors-and-not-errors"><a class="header" href="#errors-and-not-errors">Errors and Not-Errors</a></h2>
<p>In many other languages, a function may throw an exception to the exception handler, which manages the error and decides whether or not to exit the program. In Rust, however, errors are managed with the built-in <code>Result</code> enum, or with <code>panic!</code>ing. Using <code>Result</code> is typically preferable, especially for recoverable errors.</p>
<p><code>Result&lt;T, E&gt;</code> is also generic, and defined as follows, with two generic types (one for valid, and one for error):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Result&lt;T, E&gt; {
  // a non-erroneous return value, with user-provided type T
  Ok(T),
  // an erroneous return value, with user-provided error type E
  Err(E),
}
<span class="boring">}</span></code></pre></pre>
<h2 id="unwrapping-like-its-christmas"><a class="header" href="#unwrapping-like-its-christmas">Unwrapping Like It's Christmas</a></h2>
<p>Both <code>Result</code> and <code>Option</code> provide an <code>unwrap</code> method (among many others), which performs something similar to this:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// These are the equivalents, the method is defined on Option and Result, and 
// can just be used with the . operator as: `opt.unwrap()` or `res.unwrap()`

// basically, return the inner type T of the Option
fn unwrap&lt;T&gt;(opt: Option&lt;T&gt;) -&gt; T {
  match opt {
    // equivalent to dereferencing a valid pointer
    Some(t) =&gt; t,
    // equivalent to dereferencing a null pointer
    None =&gt; panic!("Called unwrap on `None` value"),
  }
}

// return the valid inner type of the Result
fn unwrap&lt;T, E&gt;(res: Result&lt;T, E&gt;) -&gt; T {
  match res {
    // equivalent to working with the valid return value of a function
    Ok(t) =&gt; t,
    // immediately crash the program when an error is thrown
    Err(e) =&gt; panic!("Called unwrap on `Err` value {:?}", e),
  }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="documentation-1"><a class="header" href="#documentation-1">Documentation</a></h3>
<p><a href="https://doc.rust-lang.org/std/result/enum.Result.html">Result</a></p>
<h2 id="the-enemy-mids-all-chat-after-he-solo-kills-the-your-mid"><a class="header" href="#the-enemy-mids-all-chat-after-he-solo-kills-the-your-mid">The Enemy Mid's All Chat After He Solo Kills The Your Mid</a></h2>
<p>When a function returns a <code>Result</code>, and is called within another function that returns a <code>Result</code> with the same error type, you can use the fabled <code>?</code> operator.</p>
<p>The <code>?</code> operator performs the equivalent of the following code:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// The equivalent of `result?`
match result {
  Ok(t) =&gt; t,
  Err(e) =&gt; return Err(e),
}  
<span class="boring">}</span></code></pre></pre>
<p>The actual usage of the <code>?</code> operator looks like this:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn err_func(val: u32) -&gt; Result&lt;u32, String&gt; {
  if val == 0 {
    return Err("String Error".to_owned());
  }
  Ok(val)
}

fn caller(val: u32) -&gt; Result&lt;f32, String&gt; {
  // note the `?` will set `int` to val, if it's Ok, or will return 
  // Err("String Error") from this caller function as a whole if it's Err.
  let int: u32 = err_func(val)?;
  Ok(int as f32)
}

fn another(val: u32) -&gt; Result&lt;u32, i8&gt; {
  // This will not compile, since `String` is different from `i8`, and thus 
  // cannot be directly returned
  let int: u32 = err_func(val)?;
  Ok(int)
}
<span class="boring">}</span></code></pre></pre>
<h2 id="use-the-anyhow-crate-for-better-results"><a class="header" href="#use-the-anyhow-crate-for-better-results">Use the <code>anyhow</code> Crate for Better Results</a></h2>
<p>We haven't talked too much about libraries (called crates) and Rust's package manager, but they are relatively easy to use, and feel similar to Python's pip. The Rust community has provided a special crate for easy error handling called <a href="https://crates.io/crates/anyhow">anyhow</a>.</p>
<p>Anyhow can be added to a project by running <code>cargo add anyhow</code> in the command line within the project, and provides a new <code>Result</code> type and the <code>anyhow!</code> macro, along with many other useful error handling tools.</p>
<p>In the previous section, we saw how mismatched error types prevents the <code>?</code> operator from functioning properly. The <code>anyhow::Result&lt;T&gt;</code> enum allows for handling multiple different error types in a single <code>Result</code>, allowing us to bypass this issue. When creating a new error with <code>anyhow::Result</code>, we use the <code>anyhow::anyhow!</code> macro.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// this import overwrites the built-in Rust `Result`, so now all `Results` in
// this snippet refer to anyhow::Result.
use anyhow::{Result, anyhow};

// Note that this probably doesn't actually work with these specific error
// types, but this is a simple example that gets the idea across.

fn err_func(val: u32) -&gt; Result&lt;u32&gt; {
  if val == 0 {
    return Err(anyhow!("Value is 0"));
  }
  Ok(val)
}

fn caller(val: u32) -&gt; Result&lt;f32&gt; {
  // note the `?` will set `int` to val, if it's Ok, or will return 
  // Err("String Error") from this caller function as a whole if it's Err.
  let int: u32 = err_func(val)?;
  // multiple `?`s because enemy mid got ganked and got a double
  let f: f32 = alt_err(int)?;
}

fn alt_err(val: u32) -&gt; Result&lt;f32&gt; {
  let f: f32 = val as f32;
  if f &lt; 0.0 {
    return Err(anyhow!("value overflow"));
  }
  Ok(f)
}

fn another(val: u32) -&gt; Result&lt;u32&gt; {
  // anyhow allows us to not worry about what error types we're working with
  let int: u32 = err_func(val)?;
  Ok(int)
}
<span class="boring">}</span></code></pre></pre>
<h3 id="documentation-2"><a class="header" href="#documentation-2">Documentation</a></h3>
<p><a href="https://docs.rs/anyhow/latest/anyhow/type.Result.html">anyhow::Result</a>,
<a href="https://docs.rs/anyhow/latest/anyhow/macro.anyhow.html">anyhow::anyhow!</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="enums.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="blocks.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="enums.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="blocks.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
